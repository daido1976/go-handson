# コマンドラインツールを作ろう

## はじめに

このハンズオンでは、画像変換を行うコマンドラインツールを作ります。
基本的な文法などは、このハンズオンでは扱いません。
そのため、ハンズオンを始める前に、必ず [A Tour of Go](https://go-tour-jp.appspot.com)を終わらせてください。
また、文法や周辺ツール、`GOPATH`などの詳しい説明は[公式ドキュメント](https://golang.org/doc/)の「Learning Go」の項目を読んでください。
特に他のオブジェクト指向言語などを学習されている方は、「FAQ」に目を通すとよいでしょう。

英語が辛い方は、有志によって[翻訳されたドキュメント](http://golang-jp.org/doc/)の「Goを学ぶ」を読んで下さい。
すべてが翻訳されているわけではありませんが、役に立つでしょう。
また、[はじめてのGo](http://gihyo.jp/dev/feature/01/go_4beginners)も日本語で書かれていて分かりやすいのでぜひ読んで下さい。

標準パッケージについては、[パッケージドキュメント](https://golang.org/pkg/)を見ると、使い方が説明されています。

## 学べることと学べないこと

このハンズオンを行うと以下のことが学べます。

* `go get`や`GOPATH`について
* コマンドライン引数の取り方
* ファイルの扱い方
* 画像ファイルの扱い方
* `flag`パッケージの使い方
* 埋込み
* 画像処理の仕方
* `golang.org/x/`以下のパッケージについて
* テンプレートエンジンの使い方
* ディレクトリを再帰的に処理する方法 

一方、学べないことは以下のとおりです。

* Goの開発環境のインストール方法
* IDEやエディタの設定
* 基本的な文法
* ゴールーチンとチャネル
* net/httpパッケージ

## ハンズオンのやりかた

`skeleton`ディレクトリ以下に問題があり、8つのステップに分けられています。
STEP 1からSTEP 8まで進んでいき、最終的には画像変換を行うコマンドラインツールが出来上がります。

各ステップに、READMEが用意されていますので、まずは`README`を読みます。
`README`には、そのステップを理解するための解説が書かれています。

`README`を読んだら、ソースコードを開き`TODO`コメントが書かれている箇所をコメントに従って修正して行きます。
`TODO`コメントをすべて修正し終わったら、`README`に書かれた実行例に従ってプログラムをコンパイルして実行します。

途中でわからなくなった場合は、`solution`ディレクトリ以下に解答例を用意していますので、そちらをご覧ください。

このハンズオンを行うには、`GOPATH`をこの`README`があるディレクトリ以下の`skeleton`ディレクトリに設定してください。

MacやLinuxの場合：

```
$ export GOPATH=`pwd`/skeleton
```

Windowsの場合：

```
SET GOPATH=%CD%\skeleton
```

なお、ハンズオン中に、`tree`コマンドを実行している部分がありますが、
分かりやすさのためなので、特に実行する必要はありません。

`Mac`と`Windows`で動作確認をしていますが、解説は`Mac`の動作結果をもとに解説しています。
`Windows`の方は、パスの区切り文字等を適宜読み替えてください。

`skeleton/tools`以下には、ハンズオン中で使うツールが入っています。
`skeleton`に`GOPATH`が通っていれば、`go install`でビルドできます。
特に中身を読む必要はありませんが、読んでみても面白いでしょう。
余談ですが、ここで用意しているツールは、`Mac`と`Windows`の環境の違いを吸収するために用意しています。
まさしくGoの使いドコロでしょう。

## 目次

* STEP 1: [go installしてみよう](./skeleton/src/step1)（[解答例](./solution/src/step1)）
* STEP 2: [コマンドライン引数を取ろう](./skeleton/src/step2)（[解答例](./solution/src/step2)）
* STEP 3: [ファイルを扱おう](./skeleton/src/step3)（[解答例](./solution/src/step3)）
* STEP 4: [画像形式を変換しよう](./skeleton/src/step4)（[解答例](./solution/src/step4)）
* STEP 5: [`flag`パッケージを使おう](./skeleton/src/step5)（[解答例](./solution/src/step5)）
* STEP 6: [画像を切り抜こう](./skeleton/src/step6)（[解答例](./solution/src/step6)）
* STEP 7: [画像を縮小／拡大しよう](./skeleton/src/step7)（[解答例](./solution/src/step7)）
* STEP 8: [複数のファイルを処理しよう](./skeleton/src/step8)（[解答例](./solution/src/step8)）

## ハンズオンの開催や資料の扱いについて
この資料を元にハンズオンを開催するために@tenntennの許可などはいりません。
好きに開催してください。
@tenntennの行ける範囲であれば、開催するから解説して欲しいという依頼もウェルカムです。

なお、forkして変更してもらっても構いませんが、できればPRをいただけると嬉しいです。
資料に間違えを発見した方もissueやPRを頂ければ対応します。

きっといつか英語にも翻訳します。
